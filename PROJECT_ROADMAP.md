# プロジェクトロードマップ - 競艇予測AI公開・収益化

このドキュメントは、競艇予測AIを本番公開し、収益化するための包括的なロードマップです。

---

## 📊 現在の進捗状況

### ✅ 完了済み
- [x] プロジェクト基盤構築（Next.js + Python + Supabase）
- [x] データ収集システム構築（自動バックフィル、日次収集）
- [x] Supabaseセキュリティ設定（RLS有効化）
- [x] GitHub Actions自動化（データ収集ワークフロー）
- [x] 基本的なMLモデル構築（XGBoost）
- [x] フロントエンド基本UI（Next.js）

### 🔄 進行中
- [ ] 過去データ収集（2020年～現在、約5年分）
  - 現状: 2025年10-11月のみ（約2ヶ月分）
  - 目標: 2020年1月～現在（約5年分、400,000レース）
  - 自動バックフィル: 毎日深夜3時に1ヶ月分ずつ収集

---

## 🎯 Phase 1: データ基盤完成（現在～2週間後）

### データ収集
- [ ] 2024年全体のデータ収集完了（約2週間）
- [ ] 2023-2020年のデータ収集完了（約4週間）
- [ ] データ完全性チェック（欠損データ確認）
- [ ] 天気データの充実化（現在0.7% → 80%以上）

### データベース最適化
- [ ] インデックス最適化（クエリ高速化）
- [ ] データクリーニング（重複・異常値除去）
- [ ] パフォーマンスモニタリング設定

---

## 🤖 Phase 2: 機械学習モデル最適化（2-4週間後）

### モデル開発
- [ ] 特徴量エンジニアリング拡張
  - [ ] 天気関連特徴量（風速・風向き・波高）
  - [ ] 時系列特徴量（直近成績トレンド）
  - [ ] 複合特徴量（選手×モーター×コース）

- [ ] ハイパーパラメータ最適化
  - [ ] `ml/hyperparameter_tuning.py` 実行（2-6時間）
  - [ ] 最適パラメータでモデル再訓練

- [ ] モデル評価・検証
  - [ ] 精度目標: 35-40%（現在: 20-25%）
  - [ ] クロスバリデーション実施
  - [ ] バックテスト（過去データでの予測精度検証）

### 予測精度向上
- [ ] アンサンブル学習の導入
  - [ ] XGBoost + LightGBM + CatBoost
  - [ ] Stacking/Blending戦略

- [ ] 深層学習モデルの検討（オプション）
  - [ ] LSTM/Transformerによる時系列予測
  - [ ] ニューラルネットワークとの組み合わせ

---

## 🌐 Phase 3: ウェブアプリケーション完成（3-5週間後）

### UI/UX改善
- [ ] レースページのデザイン改善
  - [ ] 予測結果の視覚化（グラフ・チャート）
  - [ ] 選手情報の詳細表示
  - [ ] モーター情報の表示

- [ ] ダッシュボード機能
  - [x] 分析ダッシュボード（基本）
  - [ ] リアルタイム予測表示
  - [ ] 過去の予測精度レポート

- [ ] レスポンシブ対応
  - [ ] モバイル最適化
  - [ ] タブレット対応
  - [ ] PWA化（オフライン対応）

### 機能追加
- [ ] ユーザー認証（Supabase Auth）
  - [ ] 会員登録・ログイン
  - [ ] ソーシャルログイン（Google, Twitter）

- [ ] お気に入り機能
  - [ ] 選手のフォロー
  - [ ] 会場のフォロー
  - [ ] 通知設定

- [ ] 予測履歴・統計
  - [ ] 自分の予測履歴
  - [ ] 的中率・回収率の追跡
  - [ ] ランキング機能

### パフォーマンス最適化
- [ ] APIレスポンス高速化
  - [ ] キャッシング戦略（Redis検討）
  - [ ] データベースクエリ最適化
  - [ ] Edge Functions活用

- [ ] フロントエンド最適化
  - [ ] コード分割・遅延ロード
  - [ ] 画像最適化
  - [ ] バンドルサイズ削減

---

## 🚀 Phase 4: 本番デプロイ・公開準備（4-6週間後）

### インフラ・セキュリティ
- [ ] 本番環境設定
  - [x] Vercel本番デプロイ設定
  - [x] Supabase本番データベース
  - [ ] 環境変数の分離（dev/staging/prod）

- [ ] セキュリティ強化
  - [x] RLSポリシー有効化
  - [ ] レート制限（API保護）
  - [ ] CORS設定
  - [ ] CSP（Content Security Policy）設定

- [ ] モニタリング・ログ
  - [ ] エラートラッキング（Sentry導入）
  - [ ] アクセス解析（Google Analytics）
  - [ ] パフォーマンスモニタリング（Vercel Analytics）
  - [ ] アラート設定（異常検知）

### 法務・コンプライアンス
- [ ] 利用規約作成
  - [ ] サービス利用条件
  - [ ] 免責事項（予測の精度保証なし）
  - [ ] 禁止事項（不正利用防止）

- [ ] プライバシーポリシー作成
  - [ ] 個人情報の取り扱い
  - [ ] Cookie使用について
  - [ ] データ保持期間

- [ ] 特定商取引法表記（収益化時）
  - [ ] 運営者情報
  - [ ] 料金体系
  - [ ] 返金ポリシー

### テスト・品質保証
- [ ] ユニットテスト作成
  - [ ] バックエンドAPIテスト
  - [ ] 予測ロジックテスト

- [ ] E2Eテスト
  - [ ] ユーザーフロー検証
  - [ ] クロスブラウザテスト

- [ ] 負荷テスト
  - [ ] 同時アクセステスト
  - [ ] APIパフォーマンステスト

---

## 💰 Phase 5: 収益化戦略（5-8週間後）

### マネタイゼーション施策

#### 1. フリーミアムモデル
- [ ] 無料プラン
  - 基本的な予測表示（1日3レースまで）
  - 過去の予測結果閲覧（直近7日間）

- [ ] プレミアムプラン（月額500-1,000円）
  - 全レース予測表示（制限なし）
  - 詳細な分析データ（選手成績、モーター性能）
  - 予測精度レポート
  - 広告非表示

- [ ] プロプラン（月額2,000-3,000円）
  - API アクセス
  - カスタム予測アルゴリズム
  - 優先サポート

#### 2. 広告収益
- [ ] Google AdSense導入
  - [ ] ディスプレイ広告
  - [ ] 記事内広告
  - [ ] 自動広告

- [ ] アフィリエイト
  - [ ] 競艇関連商品（ボートレース場のチケット等）
  - [ ] スポーツベッティング関連（海外向け）

#### 3. データ販売・API提供
- [ ] API利用料金
  - 予測データAPI（1,000リクエスト/月: 5,000円）
  - 過去データAPI

- [ ] B2B向けデータ販売
  - 競艇分析レポート
  - 統計データ提供

### 決済システム導入
- [ ] Stripe連携
  - [ ] サブスクリプション管理
  - [ ] 自動請求
  - [ ] 返金処理

- [ ] 課金フロー実装
  - [ ] プラン選択UI
  - [ ] 決済ページ
  - [ ] 領収書発行

---

## 📈 Phase 6: マーケティング・グロース（6週間後～）

### プロモーション
- [ ] SEO対策
  - [ ] メタタグ最適化
  - [ ] サイトマップ作成
  - [ ] 構造化データ実装

- [ ] コンテンツマーケティング
  - [ ] ブログ記事作成（予測ノウハウ、分析記事）
  - [ ] SNS運用（Twitter, YouTube）
  - [ ] プレスリリース配信

- [ ] コミュニティ構築
  - [ ] Discord/Slackコミュニティ
  - [ ] ユーザーフィードバック収集
  - [ ] ベータテスター募集

### データ分析・改善
- [ ] A/Bテスト実施
  - [ ] UI/UXパターン検証
  - [ ] 価格設定テスト

- [ ] ユーザー行動分析
  - [ ] コンバージョン率分析
  - [ ] 離脱ポイント特定
  - [ ] 改善施策実施

---

## 🛠️ 技術的課題・検討事項

### スケーラビリティ
- [ ] データベースキャパシティ管理
  - 現在: 約50MB（13,660レース）
  - 5年分: 約350MB（400,000レース）
  - Supabase無料枠: 500MB → 十分

- [ ] API使用量管理
  - Vercel無料枠: 100GB/月
  - 予測API最適化（キャッシング）

### 運用・メンテナンス
- [ ] 自動デプロイパイプライン
  - [ ] CI/CDセットアップ（GitHub Actions）
  - [ ] 自動テスト実行
  - [ ] ステージング環境

- [ ] バックアップ戦略
  - [ ] データベース定期バックアップ
  - [ ] モデルファイルバックアップ
  - [ ] 災害復旧計画

### コスト見積もり（月額）
- Vercel: 無料枠内（Pro: $20/月）
- Supabase: 無料枠内（Pro: $25/月）
- ドメイン: 約1,000円/年
- その他ツール: 約$20/月

**合計**: 月額0円～$65（約7,000円）

---

## 📅 タイムライン（全体）

| Phase | 期間 | 主要タスク | 目標 |
|-------|------|-----------|------|
| **Phase 1** | Week 1-2 | データ収集完了 | 5年分データ取得 |
| **Phase 2** | Week 2-4 | ML最適化 | 予測精度35-40% |
| **Phase 3** | Week 3-5 | UI/UX完成 | 本番レベルのUX |
| **Phase 4** | Week 4-6 | デプロイ準備 | 本番公開 |
| **Phase 5** | Week 5-8 | 収益化 | 決済システム稼働 |
| **Phase 6** | Week 6- | グロース | ユーザー獲得 |

**最短公開日**: 6週間後（約1.5ヶ月）
**収益化開始**: 8週間後（約2ヶ月）

---

## ✅ 次のアクションアイテム（優先度順）

### 今週中
1. [ ] データ収集完了まで待機（自動バックフィル継続）
2. [ ] 既存モデルの評価・ベースライン確立
3. [ ] UI改善の優先順位決定

### 来週
1. [ ] ハイパーパラメータ最適化実行
2. [ ] 予測精度向上施策の実装
3. [ ] ダッシュボードUI改善

### 今月中
1. [ ] データ収集完了（2024年全体）
2. [ ] モデル精度30%以上達成
3. [ ] プレミアム機能の設計

---

## 📞 サポート・ドキュメント

- `README.md` - プロジェクト概要
- `CLAUDE.md` - 開発ガイド
- `README_BACKFILL_GUIDE.md` - データ収集ガイド
- `README_TRAINING.md` - モデル訓練ガイド
- `boatrace-predictor-design.md` - 完全設計書

---

**最終更新**: 2025-12-03
**次回レビュー**: データ収集完了時（約2週間後）
